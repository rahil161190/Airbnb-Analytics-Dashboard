<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airbnb Analytics: Optimizing Listings Through Images</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 45vh;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
                max-height: 50vh;
            }
        }
        .recommendation-card {
            background-color: #ffffff;
            border-top: 4px solid #444e86;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .recommendation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .recommendation-flow-step {
            border: 2px solid #444e86;
            background-color: #ffffff;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .recommendation-flow-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .flow-arrow {
            color: #444e86;
            font-size: 2rem;
            line-height: 1;
        }
        #ai-planner-card {
            background: linear-gradient(135deg, #444e86, #003f5c);
        }
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #ffa600;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-800">

    <header class="bg-white shadow-md sticky top-0 z-10">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <h1 class="text-3xl font-bold tracking-tight text-[#003f5c]">Airbnb Analytics: Maximizing Bookings Through Image Optimization</h1>
            <p class="mt-1 text-md text-gray-600">A data-driven approach to understanding what drives host success.</p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="md:col-span-2 bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-bold text-[#003f5c] mb-2">The Challenge: Turning Clicks into Bookings</h2>
                <p class="text-gray-700">Airbnb observed a strong link between the number of property images and booking rates. Many listings with few or no images were "redundant," failing to attract a single booking. Our goal was to find the sweet spot: the minimum images required to get noticed and the optimal number to maximize success.</p>
            </div>
        </div>

        <section id="underperformance" class="mt-12">
            <h2 class="text-3xl font-extrabold text-[#003f5c] text-center mb-8">The High Cost of Poor Imagery</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#dd5182] mb-4">Unbooked Days: The "Open Listings" Problem</h3>
                    <p class="text-gray-600 mb-4">"Open listings" are properties that were available but remained unbooked. Our analysis shows a dramatic trend: listings with fewer images are far more likely to sit empty.</p>
                    <div class="chart-container">
                        <canvas id="open-listings-chart"></canvas>
                    </div>
                    <p class="text-center text-sm text-gray-500 mt-2">Listings with 0-5 images account for over 70% of all unbooked days.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#ff6e54] mb-4">Invisible Properties: The "Redundant Listings" Issue</h3>
                    <p class="text-gray-600 mb-4">"Redundant listings" haven't received a single booking in the last year. The data clearly shows that a lack of images is a primary cause, making these listings practically invisible to potential guests.</p>
                    <div class="chart-container">
                        <canvas id="redundant-listings-chart"></canvas>
                    </div>
                     <p class="text-center text-sm text-gray-500 mt-2">A significant portion of listings with few images are redundant.</p>
                </div>
            </div>
        </section>
        
        <section id="optimization" class="mt-12">
            <h2 class="text-3xl font-extrabold text-[#003f5c] text-center mb-8">Finding the Sweet Spot: How Many Images Are Enough?</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#955196] mb-4">Performance of Regular Hosts</h3>
                    <p class="text-gray-600 mb-4">For Regular Hosts, there's a clear peak. While more images are generally better, the highest median number of bookings occurs in a specific range, suggesting a point of optimal engagement.</p>
                    <div class="chart-container">
                        <canvas id="regular-host-chart"></canvas>
                    </div>
                    <p class="text-center text-sm text-gray-500 mt-2">Peak median bookings for Regular Hosts occur with 12-13 images.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-[#ffa600] mb-4">Performance of Superhosts</h3>
                    <p class="text-gray-600 mb-4">Superhosts show a similar trend. While some outliers with many images perform exceptionally well, a practical and highly effective number emerges that balances effort with reward.</p>
                    <div class="chart-container">
                        <canvas id="superhost-chart"></canvas>
                    </div>
                    <p class="text-center text-sm text-gray-500 mt-2">For Superhosts, 11 images provide a fantastic, practical return on booking volume.</p>
                </div>
            </div>
        </section>

        <section id="booking-age-analysis" class="mt-12">
            <h2 class="text-3xl font-extrabold text-[#003f5c] text-center mb-4">The Influence of Listing Age on Performance</h2>
            <p class="text-center text-gray-600 max-w-3xl mx-auto mb-8">Does a listing's age impact its success? This analysis shows the total sum of bookings for different image counts, broken down by the age of the listing. This reveals how performance is tied to both image count and listing maturity.</p>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:items-stretch">
                <div class="bg-white rounded-lg shadow-md p-6 flex flex-col">
                    <h3 class="text-xl font-bold text-[#955196] mb-4">Regular Hosts: Total Bookings by Listing Age</h3>
                    <div class="chart-container flex-grow">
                        <canvas id="regular-host-age-chart"></canvas>
                    </div>
                    <p class="text-center text-sm text-gray-500 mt-4">For Regular Hosts, older listings (3+ years) with few photos still account for a significant number of bookings, but the highest potential is seen in newer listings that adopt the 11-15 image best practice from the start.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 flex flex-col">
                    <h3 class="text-xl font-bold text-[#ffa600] mb-4">Superhosts: Total Bookings by Listing Age</h3>
                    <div class="chart-container flex-grow">
                        <canvas id="superhost-age-chart"></canvas>
                    </div>
                     <p class="text-center text-sm text-gray-500 mt-4">Superhosts show a clear strategy: total bookings peak dramatically in the 11-15 image range. Newer listings (&lt; 3 years) contribute the most to this success, indicating that top hosts quickly maximize their photo count.</p>
                </div>
            </div>
        </section>

        <!-- CORRECTED SECTION: Total Monthly Bookings -->
        <section id="active-listing-performance" class="mt-12">
            <h2 class="text-3xl font-extrabold text-[#003f5c] text-center mb-4">Monthly Bookings for Active Listings</h2>
            <p class="text-center text-gray-600 max-w-3xl mx-auto mb-8">This analysis shows the count of monthly bookings for listings that have at least one booking per month. It clearly demonstrates the direct relationship between the number of photos and booking frequency for active hosts.</p>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:items-stretch">
                <div class="bg-white rounded-lg shadow-md p-6 flex flex-col">
                    <h3 class="text-xl font-bold text-[#955196] mb-4">Monthly Bookings (Regular Hosts)</h3>
                    <div class="chart-container flex-grow">
                        <canvas id="regular-host-booking-count-chart"></canvas>
                    </div>
                    <p class="text-center text-sm text-gray-500 mt-4">For active Regular Hosts, the count of monthly bookings peaks for listings with 11-15 images, showing a clear incentive to increase photo counts.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 flex flex-col">
                    <h3 class="text-xl font-bold text-[#ffa600] mb-4">Monthly Bookings (Superhosts)</h3>
                    <div class="chart-container flex-grow">
                        <canvas id="superhost-booking-count-chart"></canvas>
                    </div>
                     <p class="text-center text-sm text-gray-500 mt-4">Active Superhosts see the highest count of monthly bookings in the 11-15 and 16-20 image ranges, reinforcing this as the optimal target for maximum engagement.</p>
                </div>
            </div>
        </section>

        <section id="recommendations" class="mt-12">
            <h2 class="text-3xl font-extrabold text-[#003f5c] text-center mb-8">Actionable Recommendations</h2>
            <div class="p-6 md:p-8 bg-gray-50 rounded-lg shadow-inner">
                <div class="flex flex-col items-center">
                    <div class="recommendation-flow-step text-center p-6 rounded-lg w-full max-w-md">
                        <h3 class="text-xl font-bold text-[#003f5c]">Start Here: Assess Your Listing</h3>
                        <p class="text-gray-600 mt-2">Is your listing underperforming, new, or old and un-updated?</p>
                    </div>
                    <div class="flow-arrow my-4">⬇️</div>
                    <div class="w-full flex flex-col md:flex-row justify-center gap-8">
                        <div class="recommendation-flow-step text-center p-6 rounded-lg flex-1">
                            <h4 class="text-lg font-bold text-[#dd5182]">The Minimum Standard</h4>
                            <p class="text-5xl font-black text-[#dd5182] my-4">6</p>
                            <p class="text-gray-600">Implement a **mandatory minimum of 6 images** per listing. This is the baseline to escape redundancy and ensure consistent monthly booking potential, especially for older listings.</p>
                        </div>
                        <div class="recommendation-flow-step text-center p-6 rounded-lg flex-1">
                            <h4 class="text-lg font-bold text-[#ffa600]">The Optimal Goal</h4>
                            <p class="text-5xl font-black text-[#ffa600] my-4">11-15</p>
                            <p class="text-gray-600">Strongly recommend hosts provide **11 to 15 images**. This range is the data-proven sweet spot for maximizing your booking rate and revenue, for both new and established listings.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gemini API Powered Section -->
        <section id="ai-planner" class="mt-12">
            <h2 class="text-3xl font-extrabold text-[#003f5c] text-center mb-8">✨ AI-Powered Photo Planner</h2>
            <div id="ai-planner-card" class="rounded-lg shadow-xl p-8 text-white">
                <div class="max-w-2xl mx-auto">
                    <p class="text-center text-lg mb-6">You know the optimal number of photos. Now, let's plan *what* to shoot. Describe your property below, and our AI will generate a custom shot list to make your listing shine.</p>
                    <div class="flex flex-col sm:flex-row gap-4 mb-6">
                        <input type="text" id="property-description" placeholder="e.g., 'Cozy 1-br apartment with city view'" class="flex-grow p-3 rounded-md text-gray-800 focus:ring-2 focus:ring-[#ffa600] focus:outline-none">
                        <button id="generate-shot-list-btn" class="bg-[#ffa600] hover:bg-[#ff8c00] text-white font-bold py-3 px-6 rounded-md transition duration-300">Generate Shot List</button>
                    </div>
                    <div id="ai-results" class="bg-white/10 p-6 rounded-lg min-h-[200px] text-left">
                        <div id="ai-placeholder" class="text-center text-gray-300">
                            <p>Your personalized photo suggestions will appear here.</p>
                        </div>
                        <div id="ai-loading" class="hidden justify-center items-center flex-col">
                            <div class="spinner"></div>
                            <p class="mt-4">Generating ideas...</p>
                        </div>
                        <div id="ai-content" class="prose prose-invert max-w-none"></div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white mt-12">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-gray-500">
            <p>&copy; 2025 Your Name. This infographic is based on the Airbnb Analytics Case Study.</p>
        </div>
    </footer>

    <script>
        // --- Chart.js Setup ---
        const tooltipConfig = { plugins: { tooltip: { callbacks: { title: function(tooltipItems) { const item = tooltipItems[0]; let label = item.chart.data.labels[item.dataIndex]; return Array.isArray(label) ? label.join(' ') : label; } } } } };
        const brilliantBlues = ['#003f5c', '#444e86', '#955196', '#dd5182', '#ff6e54', '#ffa600'];
        const imageBuckets = ['0-5', '6-10', '11-15', '16-20', '21+'];

        // --- Existing Charts ---
        const openListingsCtx = document.getElementById('open-listings-chart').getContext('2d');
        new Chart(openListingsCtx, { type: 'bar', data: { labels: ['0-2 Images', '3-5 Images', '6-10 Images', '11-15 Images', '16+ Images'], datasets: [{ label: '% of Open Listings', data: [38.36, 33.37, 10.72, 11.80, 12.87], backgroundColor: brilliantBlues }] }, options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, ...tooltipConfig, plugins: { ...tooltipConfig.plugins, legend: { display: false } }, scales: { x: { beginAtZero: true, title: { display: true, text: 'Percentage (%) of Unbooked Days' } } } } });
        const redundantListingsCtx = document.getElementById('redundant-listings-chart').getContext('2d');
        new Chart(redundantListingsCtx, { type: 'doughnut', data: { labels: ['Redundant (0-5 Images)', 'Booked (0-5 Images)'], datasets: [{ data: [45, 55], backgroundColor: ['#dd5182', '#f0f4f8'], borderColor: ['#ffffff'], borderWidth: 2 }] }, options: { responsive: true, maintainAspectRatio: false, ...tooltipConfig, plugins: { ...tooltipConfig.plugins, legend: { position: 'bottom' }, title: { display: true, text: 'Redundancy Rate for Listings with 0-5 Images' } } } });
        const regularHostData = [ { x: 1, y: 10 }, { x: 2, y: 15 }, { x: 3, y: 20 }, { x: 4, y: 25 }, { x: 5, y: 30 }, { x: 6, y: 40 }, { x: 7, y: 45 }, { x: 8, y: 50 }, { x: 9, y: 55 }, { x: 10, y: 60 }, { x: 11, y: 75 }, { x: 12, y: 85 }, { x: 13, y: 88 }, { x: 14, y: 80 }, { x: 15, y: 78 }, { x: 16, y: 70 }, { x: 17, y: 68 }, { x: 18, y: 65 }, { x: 19, y: 60 }, { x: 20, y: 58 } ];
        const regularHostCtx = document.getElementById('regular-host-chart').getContext('2d');
        new Chart(regularHostCtx, { type: 'scatter', data: { datasets: [{ label: 'Regular Host Bookings', data: regularHostData, backgroundColor: '#955196' }] }, options: { responsive: true, maintainAspectRatio: false, ...tooltipConfig, scales: { x: { type: 'linear', position: 'bottom', title: { display: true, text: 'Number of Images' } }, y: { title: { display: true, text: 'Number of Bookings' } } } } });
        const superhostData = [ { x: 5, y: 40 }, { x: 6, y: 50 }, { x: 7, y: 60 }, { x: 8, y: 70 }, { x: 9, y: 80 }, { x: 10, y: 90 }, { x: 11, y: 110 }, { x: 12, y: 105 }, { x: 13, y: 100 }, { x: 14, y: 98 }, { x: 15, y: 95 }, { x: 16, y: 115 }, { x: 17, y: 120 }, { x: 18, y: 125 }, { x: 19, y: 130 }, { x: 20, y: 128 }, { x: 21, y: 140 }, { x: 22, y: 135 }, { x: 23, y: 150 } ];
        const superhostCtx = document.getElementById('superhost-chart').getContext('2d');
        new Chart(superhostCtx, { type: 'scatter', data: { datasets: [{ label: 'Superhost Bookings', data: superhostData, backgroundColor: '#ffa600' }] }, options: { responsive: true, maintainAspectRatio: false, ...tooltipConfig, scales: { x: { type: 'linear', position: 'bottom', title: { display: true, text: 'Number of Images' } }, y: { title: { display: true, text: 'Number of Bookings' } } } } });

        // --- Stacked Bar Charts: Age vs. Total Bookings ---
        const regularHostAgeData = {
            labels: imageBuckets,
            datasets: [
                { label: '3+ Years Old', data: [1500, 1800, 1200, 800, 500], backgroundColor: '#003f5c' },
                { label: '1-3 Years Old', data: [1000, 2500, 3500, 2200, 1500], backgroundColor: '#7a5195' },
                { label: '< 1 Year Old', data: [500, 2000, 4500, 3000, 2000], backgroundColor: '#ef5675' }
            ]
        };
        const superhostAgeData = {
            labels: imageBuckets,
            datasets: [
                { label: '3+ Years Old', data: [500, 2000, 3000, 2500, 2000], backgroundColor: '#ffa600' },
                { label: '1-3 Years Old', data: [1000, 4000, 8000, 6000, 4000], backgroundColor: '#ff6e54' },
                { label: '< 1 Year Old', data: [800, 5000, 12000, 9000, 5000], backgroundColor: '#ffb38a' }
            ]
        };
        const stackedBarOptions = {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: { stacked: true, grid: { display: false }, title: { display: true, text: 'Image Count Buckets' } },
                y: { stacked: true, title: { display: true, text: 'Total Bookings' } }
            },
            plugins: { tooltip: { mode: 'index' } }
        };
        const regularHostAgeCtx = document.getElementById('regular-host-age-chart').getContext('2d');
        new Chart(regularHostAgeCtx, { type: 'bar', data: regularHostAgeData, options: stackedBarOptions });
        const superhostAgeCtx = document.getElementById('superhost-age-chart').getContext('2d');
        new Chart(superhostAgeCtx, { type: 'bar', data: superhostAgeData, options: { ...stackedBarOptions, plugins: { ...stackedBarOptions.plugins, legend: { labels: { color: '#ffa600' } } } } });

        // --- CORRECTED Bar Charts: Total Monthly Bookings (Sum) ---
        const regularHostBookingCountData = {
            labels: ['3-5', '6-10', '11-15', '16-20', '21-25', '26-30', '>30'],
            datasets: [{
                label: 'Count of Monthly Bookings',
                data: [10, 65, 69, 61, 53, 52, 20],
                backgroundColor: '#955196'
            }]
        };
        const superhostBookingCountData = {
            labels: ['6-10', '11-15', '16-20', '21-25', '26-30', '>30'],
            datasets: [{
                label: 'Count of Monthly Bookings',
                data: [7.5, 14, 14, 11, 7.5, 1],
                backgroundColor: '#ffa600'
            }]
        };
        const totalBookingsBarOptions = {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: { grid: { display: false }, title: { display: true, text: 'Image Count Buckets' } },
                y: { beginAtZero: true, title: { display: true, text: 'Count of Monthly Bookings' } }
            },
            plugins: { legend: { display: false } }
        };
        const regularHostBookingCountCtx = document.getElementById('regular-host-booking-count-chart').getContext('2d');
        new Chart(regularHostBookingCountCtx, { type: 'bar', data: regularHostBookingCountData, options: totalBookingsBarOptions });
        const superhostBookingCountCtx = document.getElementById('superhost-booking-count-chart').getContext('2d');
        new Chart(superhostBookingCountCtx, { type: 'bar', data: superhostBookingCountData, options: totalBookingsBarOptions });


        // --- Gemini API Feature Logic ---
        const generateBtn = document.getElementById('generate-shot-list-btn');
        const propertyInput = document.getElementById('property-description');
        const aiPlaceholder = document.getElementById('ai-placeholder');
        const aiLoading = document.getElementById('ai-loading');
        const aiContent = document.getElementById('ai-content');

        generateBtn.addEventListener('click', async () => {
            const description = propertyInput.value.trim();
            if (!description) {
                aiContent.innerHTML = `<p class="text-yellow-300">Please enter a description of your property first.</p>`;
                aiPlaceholder.classList.add('hidden');
                return;
            }

            aiPlaceholder.classList.add('hidden');
            aiContent.innerHTML = '';
            aiLoading.classList.remove('hidden');
            aiLoading.classList.add('flex');
            generateBtn.disabled = true;
            generateBtn.classList.add('opacity-50');

            const prompt = `You are an expert Airbnb host consultant. A user wants a photo shot list for their property. Based on their description, generate a list of 12-15 essential photo ideas that will attract guests. For each photo, provide a catchy title and a brief, actionable description of what to capture. Prioritize unique amenities and a visual story. Make the output in Markdown format with headings and lists. The property is: "${description}"`;

            const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            const apiKey = ""; // API key will be handled by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) throw new Error(`API request failed with status ${response.status}`);

                const result = await response.json();
                
                if (result.candidates && result.candidates[0]?.content?.parts?.[0]) {
                    let text = result.candidates[0].content.parts[0].text;
                    text = text
                        .replace(/### (.*)/g, '<h3 class="text-lg font-semibold mt-4 mb-2 text-white">$1</h3>')
                        .replace(/## (.*)/g, '<h2 class="text-xl font-bold mt-6 mb-3 text-white">$1</h2>')
                        .replace(/\* \*\*(.*):\*\* (.*)/g, '<li><strong>$1:</strong> $2</li>')
                        .replace(/\* (.*)/g, '<li>$1</li>')
                        .replace(/\n/g, '<br>');
                    aiContent.innerHTML = text;
                } else {
                    throw new Error("Received an invalid response from the AI.");
                }

            } catch (error) {
                console.error("Gemini API Error:", error);
                aiContent.innerHTML = `<p class="text-red-400">Sorry, something went wrong while generating ideas. Please try again later. Error: ${error.message}</p>`;
            } finally {
                aiLoading.classList.add('hidden');
                aiLoading.classList.remove('flex');
                generateBtn.disabled = false;
                generateBtn.classList.remove('opacity-50');
            }
        });
    </script>
</body>
</html>
